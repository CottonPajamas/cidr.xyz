function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,r,e){return r&&_defineProperties(t.prototype,r),e&&_defineProperties(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var r=_toPrimitive(t,"string");return"symbol"===_typeof(r)?r:String(r)}function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,r||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_unsupportedIterableToArray(t,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function _iterableToArrayLimit(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,o,a,s=[],l=!0,f=!1;try{if(o=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=o.call(e)).done)&&(s.push(n.value),s.length!==r);l=!0);}catch(t){f=!0,i=t}finally{try{if(!l&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(f)throw i}}return s}}function _arrayWithHoles(t){if(Array.isArray(t))return t}var long2ip=function(t){return[(t&255<<24)>>>24,(t&255<<16)>>>16,(65280&t)>>>8,255&t].join(".")},ip2long=function(t){for(var r=[],e=0;e<=3&&0!==t.length;e++){if(e>0){if("."!==t[0])throw new Error("Invalid IP");t=t.substring(1)}var n=_slicedToArray(Array.from(atob(t)),2),i=n[0],o=n[1];t=t.substring(o),r.push(i)}if(0!==t.length)throw new Error("Invalid IP");switch(r.length){case 1:if(r[0]>4294967295)throw new Error("Invalid IP");return r[0]>>>0;case 2:if(r[0]>255||r[1]>16777215)throw new Error("Invalid IP");return(r[0]<<24|r[1])>>>0;case 3:if(r[0]>255||r[1]>255||r[2]>65535)throw new Error("Invalid IP");return(r[0]<<24|r[1]<<16|r[2])>>>0;case 4:if(r[0]>255||r[1]>255||r[2]>255||r[3]>255)throw new Error("Invalid IP");return(r[0]<<24|r[1]<<16|r[2]<<8|r[3])>>>0;default:throw new Error("Invalid IP")}},chr=function(t){return t.charCodeAt(0)},chr0=chr("0"),chra=chr("a"),chrA=chr("A"),atob=function(t){var r=0,e=10,n="9",i=0;t.length>1&&"0"===t[i]&&("x"===t[i+1]||"X"===t[i+1]?(i+=2,e=16):"0"<=t[i+1]&&t[i+1]<="9"&&(i++,e=8,n="7"));for(var o=i;i<t.length;){if("0"<=t[i]&&t[i]<=n)r=r*e+(chr(t[i])-chr0)>>>0;else{if(16!==e)break;if("a"<=t[i]&&t[i]<="f")r=r*e+(10+chr(t[i])-chra)>>>0;else{if(!("A"<=t[i]&&t[i]<="F"))break;r=r*e+(10+chr(t[i])-chrA)>>>0}}if(r>4294967295)throw new Error("too large");i++}if(i===o)throw new Error("empty octet");return[r,i]},Netmask=function(){function t(r,e){if(_classCallCheck(this,t),"string"!=typeof r)throw new Error("Missing `net' parameter");if(!e){var n=_slicedToArray(Array.from(r.split("/",2)),2);r=n[0],e=n[1]}if(e||(e=32),"string"==typeof e&&e.indexOf(".")>-1){try{this.maskLong=ip2long(e)}catch(t){throw new Error("Invalid mask: ".concat(e))}for(var i=32;i>=0;i--)if(this.maskLong===4294967295<<32-i>>>0){this.bitmask=i;break}}else{if(!e&&0!==e)throw new Error("Invalid mask: empty");this.bitmask=parseInt(e,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(ip2long(r)&this.maskLong)>>>0}catch(t){throw new Error("Invalid net address: ".concat(r))}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: ".concat(e));this.size=Math.pow(2,32-this.bitmask),this.base=long2ip(this.netLong),this.mask=long2ip(this.maskLong),this.hostmask=long2ip(~this.maskLong),this.first=this.bitmask<=30?long2ip(this.netLong+1):this.base,this.last=this.bitmask<=30?long2ip(this.netLong+this.size-2):long2ip(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?long2ip(this.netLong+this.size-1):void 0}return _createClass(t,[{key:"contains",value:function(r){return"string"==typeof r&&(r.indexOf("/")>0||4!==r.split(".").length)&&(r=new t(r)),r instanceof t?this.contains(r.base)&&this.contains(r.broadcast||r.last):(ip2long(r)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0}},{key:"next",value:function(r){return null==r&&(r=1),new t(long2ip(this.netLong+this.size*r),this.mask)}},{key:"forEach",value:function(t){for(var r=ip2long(this.first),e=ip2long(this.last),n=0;r<=e;)t(long2ip(r),r,n),n++,r++}},{key:"toString",value:function(){return this.base+"/"+this.bitmask}}]),t}();exports.ip2long=ip2long,exports.long2ip=long2ip,exports.Netmask=Netmask;